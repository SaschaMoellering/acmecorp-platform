#!/bin/bash\n\n# Restore all Spring Boot services from checkpoints\n# Usage: ./scripts/crac/restore-all.sh\n\nset -euo pipefail\n\nSPRING_BOOT_SERVICES=(\"gateway-service\" \"orders-service\" \"billing-service\" \"notification-service\" \"analytics-service\")\n\necho \"=== Restoring all Spring Boot services from checkpoints ===\"\necho \"Date: $(date)\"\necho\n\n# Check if infrastructure is running\necho \"Checking infrastructure dependencies...\"\nif ! docker ps | grep -q \"acmecorp-postgres\"; then\n    echo \"Warning: PostgreSQL container not found. Make sure infrastructure is running:\"\n    echo \"  cd infra/local && docker compose up -d\"\nfi\n\nif ! docker ps | grep -q \"acmecorp-rabbitmq\"; then\n    echo \"Warning: RabbitMQ container not found. Make sure infrastructure is running:\"\n    echo \"  cd infra/local && docker compose up -d\"\nfi\n\necho\n\nfor service in \"${SPRING_BOOT_SERVICES[@]}\"; do\n    echo \"Restoring $service from checkpoint...\"\n    \n    if ./scripts/crac/restore.sh \"$service\"; then\n        echo \"✅ $service restored successfully\"\n    else\n        echo \"❌ Failed to restore $service\"\n        echo \"Continuing with next service...\"\n    fi\n    \n    echo\ndone\n\necho \"Restore complete!\"\necho\necho \"Running services:\"\ndocker ps --format \"table {{.Names}}\\t{{.Ports}}\\t{{.Status}}\" | grep -E \"(gateway|orders|billing|notification|analytics)-service\" || echo \"No services running\"\necho\necho \"Health endpoints:\"\necho \"  Gateway:      http://localhost:8080/actuator/health\"\necho \"  Orders:       http://localhost:8081/actuator/health\"\necho \"  Billing:      http://localhost:8082/actuator/health\"\necho \"  Notification: http://localhost:8083/actuator/health\"\necho \"  Analytics:    http://localhost:8084/actuator/health\"\necho\necho \"To stop all services:\"\necho \"  docker stop gateway-service orders-service billing-service notification-service analytics-service\"