#!/bin/bash\n\n# Create checkpoints for all Spring Boot services\n# Usage: ./scripts/crac/checkpoint-all.sh\n\nset -euo pipefail\n\nSPRING_BOOT_SERVICES=(\"gateway-service\" \"orders-service\" \"billing-service\" \"notification-service\" \"analytics-service\")\n\necho \"=== Creating checkpoints for all Spring Boot services ===\"\necho \"Date: $(date)\"\necho\n\n# Check if infrastructure is running\necho \"Checking infrastructure dependencies...\"\nif ! docker ps | grep -q \"acmecorp-postgres\"; then\n    echo \"Warning: PostgreSQL container not found. Make sure infrastructure is running:\"\n    echo \"  cd infra/local && docker compose up -d\"\nfi\n\nif ! docker ps | grep -q \"acmecorp-rabbitmq\"; then\n    echo \"Warning: RabbitMQ container not found. Make sure infrastructure is running:\"\n    echo \"  cd infra/local && docker compose up -d\"\nfi\n\necho\n\nfor service in \"${SPRING_BOOT_SERVICES[@]}\"; do\n    echo \"Creating checkpoint for $service...\"\n    \n    if ./scripts/crac/checkpoint.sh \"$service\"; then\n        echo \"✅ Checkpoint created for $service\"\n    else\n        echo \"❌ Failed to create checkpoint for $service\"\n        echo \"Continuing with next service...\"\n    fi\n    \n    echo\ndone\n\necho \"Checkpoint creation complete!\"\necho\necho \"Created checkpoint volumes:\"\ndocker volume ls | grep \"crac-\" || echo \"No checkpoint volumes found\"\necho\necho \"To restore all services from checkpoints:\"\necho \"  ./scripts/crac/restore-all.sh\"\necho\necho \"To restore a specific service:\"\necho \"  ./scripts/crac/restore.sh <service-name>\"